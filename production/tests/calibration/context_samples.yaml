# Calibration samples for Context Metric
# Tests conversational context awareness and relevance on 1-5 scale

id: context_calibration_baseline
version: "1.0"
description: Baseline calibration for context metric - tests conversational relevance
metric: context
created_at: "2025-12-10"
tags: [calibration, context, baseline, medical, conversation]

calibration_cases:
  # Score 5: Perfect context
  - id: perfect_context_follow_up
    description: "Perfect context - relevant follow-up question"
    text: "Have you been near anyone sick recently?"
    conversation_history:
      - participant_id: patient
        text: "I have a fever and body aches."
        timestamp_ms: 1000
        source_language: en-US
        target_language: es-ES
    metadata:
      source_language: es-ES
      target_language: en-US
      participant_id: nurse
      timestamp_ms: 2000
    expected_scores:
      context_1_5: 5
      context_normalized: 1.0
    expected_reasoning: "Perfectly relevant follow-up question about potential exposure - directly related to fever symptoms"

  # Score 5: Perfect context (continuation)
  - id: perfect_context_continuation
    description: "Perfect context - natural continuation of topic"
    text: "Yes, my son had the flu last week."
    conversation_history:
      - participant_id: patient
        text: "I have a fever and body aches."
        timestamp_ms: 1000
      - participant_id: nurse
        text: "Have you been near anyone sick recently?"
        timestamp_ms: 2000
    metadata:
      source_language: en-US
      target_language: es-ES
      participant_id: patient
      timestamp_ms: 3000
    expected_scores:
      context_1_5: 5
      context_normalized: 1.0
    expected_reasoning: "Direct answer to previous question - maintains perfect conversational flow"

  # Score 4: Good context with minor deviation
  - id: good_context_related
    description: "Good context - related but slightly tangential"
    text: "How long have you been experiencing these symptoms?"
    conversation_history:
      - participant_id: patient
        text: "I have a fever and body aches."
        timestamp_ms: 1000
      - participant_id: nurse
        text: "Have you been near anyone sick?"
        timestamp_ms: 2000
      - participant_id: patient
        text: "Yes, my son had the flu."
        timestamp_ms: 3000
    metadata:
      source_language: es-ES
      target_language: en-US
      participant_id: nurse
      timestamp_ms: 4000
    expected_scores:
      context_1_5: 4
      context_normalized: 0.75
    expected_reasoning: "Relevant question but slightly jumps back to original topic instead of following up on son's flu"

  # Score 3: Acceptable context with drift
  - id: acceptable_context_drift
    description: "Acceptable but drifting - related topic but shifting focus"
    text: "That's great! Soccer is good exercise for children."
    conversation_history:
      - participant_id: patient
        text: "My son plays paddle after school."
        timestamp_ms: 1000
    metadata:
      source_language: es-ES
      target_language: en-US
      participant_id: nurse
      timestamp_ms: 2000
    expected_scores:
      context_1_5: 3
      context_normalized: 0.50
    expected_reasoning: "Related to sports/children but confuses paddle with soccer - hallucination/drift but still on general topic"

  # Score 3: Topic maintained but loosely
  - id: loose_context
    description: "Loosely maintains context - general area but not specific"
    text: "Do you exercise regularly?"
    conversation_history:
      - participant_id: patient
        text: "I have a fever and feel very tired."
        timestamp_ms: 1000
    metadata:
      source_language: es-ES
      target_language: en-US
      participant_id: nurse
      timestamp_ms: 2000
    expected_scores:
      context_1_5: 3
      context_normalized: 0.50
    expected_reasoning: "Loosely related to health but doesn't address immediate symptoms - somewhat relevant but drifting"

  # Score 2: Poor context - UTI example (context loss)
  - id: context_loss_uti
    description: "Poor context - unrelated topic change (UTI question)"
    text: "Do you have any urinary tract infection symptoms?"
    conversation_history:
      - participant_id: patient
        text: "I have a fever and body aches."
        timestamp_ms: 1000
    metadata:
      source_language: es-ES
      target_language: en-US
      participant_id: nurse
      timestamp_ms: 2000
    expected_scores:
      context_1_5: 2
      context_normalized: 0.25
    expected_reasoning: "Significant context loss - UTI symptoms unrelated to fever/body aches, unexpected topic change"

  # Score 2: Poor context - unrelated question
  - id: poor_context_unrelated
    description: "Poor context - asking about unrelated medical history"
    text: "Have you ever had surgery before?"
    conversation_history:
      - participant_id: patient
        text: "I have chest pain and shortness of breath right now."
        timestamp_ms: 1000
    metadata:
      source_language: es-ES
      target_language: en-US
      participant_id: nurse
      timestamp_ms: 2000
    expected_scores:
      context_1_5: 2
      context_normalized: 0.25
    expected_reasoning: "Poor context - ignores acute symptoms (chest pain, shortness of breath) to ask about past surgical history"

  # Score 1: Complete context loss
  - id: complete_context_loss
    description: "Complete context loss - totally unrelated response"
    text: "What's your favorite color?"
    conversation_history:
      - participant_id: patient
        text: "I have severe chest pain."
        timestamp_ms: 1000
    metadata:
      source_language: es-ES
      target_language: en-US
      participant_id: nurse
      timestamp_ms: 2000
    expected_scores:
      context_1_5: 1
      context_normalized: 0.0
    expected_reasoning: "Complete context loss - asking about favorite color when patient reported severe chest pain"

  # Score 1: Nonsensical response
  - id: nonsensical_response
    description: "Nonsensical response - no connection to conversation"
    text: "The weather is nice today and I like bananas."
    conversation_history:
      - participant_id: patient
        text: "I'm having trouble breathing."
        timestamp_ms: 1000
    metadata:
      source_language: es-ES
      target_language: en-US
      participant_id: nurse
      timestamp_ms: 2000
    expected_scores:
      context_1_5: 1
      context_normalized: 0.0
    expected_reasoning: "Completely nonsensical - no relation to medical context or patient's breathing complaint"

  # Edge case: First turn (no history)
  - id: first_turn_greeting
    description: "First turn - appropriate greeting with no prior context"
    text: "Hello, how can I help you today?"
    conversation_history: []  # No prior history
    metadata:
      source_language: es-ES
      target_language: en-US
      participant_id: nurse
      timestamp_ms: 1000
    expected_scores:
      context_1_5: 5
      context_normalized: 1.0
    expected_reasoning: "Appropriate opening for first turn - natural greeting with no prior context to maintain"
